<!-- Main Header -->
<header class="main-header">
    <div class="header-container">
        <a href="{{ url('home') if request.user.is_authenticated else url('user:login') }}" class="logo">
            <svg class="logo-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="12" width="4" height="9" rx="1" fill="currentColor"/>
                <rect x="10" y="6" width="4" height="15" rx="1" fill="currentColor"/>
                <rect x="17" y="9" width="4" height="12" rx="1" fill="currentColor"/>
            </svg>
            <span>StockBasket</span>
        </a>

        {% if request.user.is_authenticated %}
        <nav>
            <ul class="nav-menu">
                <li>
                    <a href="{{ url('home') }}" class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span>{{ _('Dashboard') }}</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url('basket_create') }}" class="{% if request.resolver_match.url_name == 'basket_create' %}active{% endif %}">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        <span>{{ _('Create Basket') }}</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url('populate_stocks') }}" class="{% if request.resolver_match.url_name == 'populate_stocks' %}active{% endif %}">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        <span>{{ _('Load Stocks') }}</span>
                    </a>
                </li>
                <li>
                    <a href="{{ url('update_prices') }}" class="{% if request.resolver_match.url_name == 'update_prices' %}active{% endif %}">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>
                        <span>{{ _('Update Prices') }}</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="user-actions">
            {% include 'stocks/_theme_toggle.j2' %}
            
            <div class="user-profile">
                <div class="avatar-circle">
                    {{ request.user.username[0]|upper }}
                </div>
                <div class="user-details">
                    <span class="name">{{ request.user.username }}</span>
                </div>
            </div>
            
            <a href="{{ url('user:logout') }}" class="btn-icon" title="{{ _('Logout') }}">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
            </a>
        </div>
        {% else %}
        <div class="auth-buttons">
            {% include 'stocks/_theme_toggle.j2' %}
            <a href="{{ url('user:login') }}" class="btn-text">{{ _('Login') }}</a>
            <a href="{{ url('user:signup') }}" class="btn-primary">{{ _('Sign Up') }}</a>
        </div>
        {% endif %}
    </div>
</header>
