<div id="chat-widget-container">
    <!-- Chat Button -->
    <button id="chat-toggle-btn" class="chat-toggle-btn" aria-label="Open Chat">
        <span class="chat-icon">ğŸ’¬</span>
        <span class="close-icon" style="display: none;">âœ•</span>
        <span id="chat-unread-badge" class="unread-badge" style="display: none;">0</span>
    </button>

    <!-- Chat Window -->
    <div id="chat-window" class="chat-window" style="display: none;">


        <!-- Chat Header -->
        <div class="chat-header">
            <div class="header-info">
                <span id="chat-avatar" class="avatar">ğŸ‘¨â€ğŸ’»</span>
                <div>
                    <h3 id="chat-group-name">Support Team</h3>
                    <span id="chat-status" class="status">Connecting...</span>
                </div>
            </div>
            <div class="header-actions">
                <div class="toggle-container">
                    <button id="ai-toggle-btn" class="toggle-btn" title="">
                        <span class="toggle-slider"></span>
                        <span class="toggle-icon ai-icon">ğŸ¤–</span>
                        <span class="toggle-icon human-icon">ğŸ‘¨â€ğŸ’¼</span>
                    </button>
                    <div class="toggle-tooltip" id="toggle-tooltip">Toggle AI/Human Support</div>
                </div>
                <button id="chat-groups-btn" class="header-btn" title="View Groups">ğŸ“‹</button>
                <button id="chat-new-group-btn" class="header-btn" title="Create Group">â•</button>
                <button id="chat-minimize-btn" class="minimize-btn" aria-label="Minimize Chat">_</button>
            </div>
        </div>

        <!-- Groups Panel (hidden by default) -->
        <div id="groups-panel" class="groups-panel" style="display: none;">
            <div class="panel-header">
                <h4>Your Chats</h4>
                <button id="close-groups-panel" class="close-panel-btn">âœ•</button>
            </div>
            <div id="groups-list" class="groups-list">
                <!-- Groups will be loaded here -->
            </div>
        </div>

        <!-- Create Group Panel (hidden by default) -->
        <div id="create-group-panel" class="create-group-panel" style="display: none;">
            <div class="panel-header">
                <h4>Create New Group</h4>
                <button id="close-create-panel" class="close-panel-btn">âœ•</button>
            </div>
            <form id="create-group-form" class="create-group-form">
                <input type="text" id="new-group-name" placeholder="Group Name" required>
                <input type="text" id="new-group-description" placeholder="Description (optional)">
                <select id="new-group-avatar">
                    <option value="ğŸ‘¥">ğŸ‘¥ Team</option>
                    <option value="ğŸ’¼">ğŸ’¼ Business</option>
                    <option value="ğŸ¯">ğŸ¯ Project</option>
                    <option value="ğŸ’¬">ğŸ’¬ Chat</option>
                    <option value="ğŸš€">ğŸš€ Launch</option>
                </select>
                <div class="member-search-section">
                    <input type="text" id="member-search" placeholder="Search users to add...">
                    <div id="search-results" class="search-results"></div>
                    <div id="selected-members" class="selected-members"></div>
                </div>
                <button type="submit" class="create-btn">Create Group</button>
            </form>
        </div>

        <!-- Group Members Panel (hidden by default) -->
        <div id="members-panel" class="members-panel" style="display: none;">
            <div class="panel-header">
                <h4 id="members-group-name">Group Members</h4>
                <button id="close-members-panel" class="close-panel-btn">âœ•</button>
            </div>
            <div id="members-list" class="members-list">
                <!-- Members will be loaded here -->
            </div>
            <div id="add-member-section" class="add-member-section" style="display: none;">
                <input type="text" id="add-member-email" placeholder="Enter email to add">
                <button id="add-member-btn" class="add-btn">Add</button>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div id="typing-indicator" class="typing-indicator" style="display: none;">
            <span id="typing-user"></span> is typing...
        </div>

        <!-- Messages Area -->
        <div id="chat-messages" class="chat-messages">
            <div class="loading-messages">Loading messages...</div>
        </div>

        <!-- Input Area -->
        <div class="chat-input-area">
            <div class="group-actions" id="group-actions" style="display: none;">
                <button id="view-members-btn" class="action-btn" title="View Members">ğŸ‘¥</button>
                <button id="leave-group-btn" class="action-btn" title="Leave Group">ğŸšª</button>
            </div>
            <form id="chat-form">
                <input type="text" id="chat-input" placeholder="Type your message..." required autocomplete="off">
                <button type="submit" class="send-btn">â¤</button>
            </form>
        </div>
    </div>
</div>

<link rel="stylesheet" href="{{ static('css/chat-widget.css') }}">

<script src="{{ static('js/chat-widget.js') }}"></script>
